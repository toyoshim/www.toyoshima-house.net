<HTML>

<HEAD>
	<TITLE>FAMIX</TITLE>
</HEAD>

<BODY TEXT="#b0b0b0" BGCOLOR="#000000" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">
	<CENTER>
		<HR SIZE=3 WIDTH="80%">
		<H1>
			<FONT COLOR="#ff2030">FAMIX現わる！</FONT>
		</H1>
		<HR SIZE=3 WIDTH="60%">

		<H2>
			<FONT COLOR="#3050f0">・・・FAMIXとは何か・・・</FONT>
		</H2>
		<P>これはX680x0用の高速ファミコンエミュレータです。<BR>
			以前ファミコンのコードを68コードにコンバートするという方法で<BR>
			いくつかのX680x0用ファミコンエミュレータが存在しました。<BR>
			しかし、これは各ソフト毎にデータとプログラムとを分析しなければならず<BR>
			また、その分析が不十分ゆえにうまく動作しない部分があったりしました。<BR>
			しかし、このFAMIXは高速であるにもかかわらず、最近の高速マシンでやているような<BR>
			バイナリインタープリタと言えるような方法で動作しています。<BR>
			これならROMデータを差し換えるだけで、即そのゲームを動かすことができます。</P>

		<H2>
			<FONT COLOR="#3050f0">・・・なぜ速いか・・・</FONT>
		</H2>
		<P>エミュレーションのコアとも言えるMPUエミュレーションをフルアセンブラで<BR>
			記述しています。しかもワークエリアはとれる限り限界までレジスタ上に置く<BR>
			など、ギチギチの最適化を施してあります。<BR>
			また、エミュレーションにおいてかなりの負担となると思われる画面処理を<BR>
			できる限りX680x0のハードにやらせているのも高速化に繋がっています。<BR>
			ファミコンのグラフィックはX680x0のBGに、スプライトはスプライトに、と<BR>
			X680x0のハード特性がもっともよく活かされるように作られています。</P>

		<H2>
			<FONT COLOR="#3050f0">・・・どれくらい速いか・・・</FONT>
		</H2>
		<P>030マシンじゃなくても十分な速度がでます。<BR>
			できればRED ZONEクラスのパワーが欲しいところですが、<BR>
			XVIやクロックアップした旧マシンでもそこそこ動くはずです。<BR>
			ファミコン側の割り込みのタイミングはきちんとX680x0側のVSYNCと<BR>
			同期してとられるため、遅いマシンで動作させた時には処理全体が遅くなる<BR>
			というよりは、ゲームの処理落ちが発生しやすくなるといった状態になります。<BR>
			逆に言えば、もともとファミコン上で処理速度に余裕をもって動いていたソフト等<BR>
			は遅いマシンを使っても正確な速度で動作可能ということです。<BR>
			RED ZONEクラスになると、ほとんどのゲームがきちんとした速度で動作します。</P>

		<H2>
			<FONT COLOR="#3050f0">・・・なぜバイナリが置いてないのか・・・</FONT>
		</H2>
		<P>ずばり未完成だからです。あまりにもギチギチに最適化しすぎたため、バグが<BR>
			とりにくくなっています。なんとかして完成させるつもりですが、しばらく<BR>
			時間がかかるかもしれません。とりあえずバグ出しのために別のプラットフォームで<BR>
			移植作業を進めてます。なにせプログラムミスなのか、ファミコンの仕様を取り違えて<BR>
			いるのかすら判断つかない状況なもので・・・。</P>

		<H2>
			<FONT COLOR="#3050f0">・・・それでも欲しい！ぷげぇ～・・・</FONT>
		</H2>
		<P>連絡さえ頂ければ、再配布不可、デバッグにはできるだけ協力するという条件で<BR>
			メール等で御送りします。デバッグに協力といっても使ってて気付いたことが<BR>
			連絡をくれる程度でかまいませんし、ちょっとした動作報告をしてくれるだけでも<BR>
			かまいません。感想や励ましのメールなどでもおっけ～です。<BR>
			現在のデバッグ版なら、デバッガーが内蔵されているため、ファミコンのソフトを<BR>
			１命令ごとにトレースしたり、ディスアセンブルリストを表示させたりできるため<BR>
			その手のものが好きな方だと楽しんでいただけるかもしれません。</P>

		<H2>
			<FONT COLOR="#3050f0">・・・本当に動いてんの！？・・・</FONT>
		</H2>
		<P>とりあえず現在の画面スナップくらいははっておきましょう。<BR>
			まだ、スプライトが化けていたり、色が変だったりします。</P>

		<TABLE BORDER="5">
			<TR>
				<TH><IMG SRC="./graphics/famix1.jpeg"></TH>
				<TH><IMG SRC="./graphics/famix2.jpeg"></TH>
			</TR>
			<TR>
				<TH>
					<P>ナッツ＆ミルク（タイトル画面）</P>
				</TH>
				<TH>
					<P>ナッツ＆ミルク（ゲーム中）</P>
				</TH>
			</TR>
		</TABLE>

		<HR SIZE=3 WIDTH="60%">

		<H1>
			<FONT COLOR="#ff0000">次回予告！！</FONT>
		</H1>
		<P>新しいCPUエミュレーションのアルゴリズムが完成しました！<BR>
			あとはプログラミングするだけです。今度のは速いですよぉ（笑）。<BR>
			なんといっても動的再コンパイルの技術を応用しているので、劇的な高速化が望めます。<BR>
			グラフィック周りについても、ある程度予測して事前コンバートをかけるので更に高速。<BR>
			従来比200%くらいになるかも。10MHz無改造マシンでも充分に動作する恐れあり（ぉ。<BR>
			しかも、以前ほど闇雲なインライン展開がなくなりそうなので、<BR>
			デバッグの際の見通しも良くなりそう。<BR>
			学校のテストが終わったらプログラミングに入ります（笑）。<BR>
			<FONT SIZE=3>フフフフフフ・・・</FONT>
		</P>

		<HR SIZE=3 WIDTH="60%">

		<H1>
			<FONT COLOR="#ff0000">予告ふたたび</FONT>
		</H1>
		<P>テスト中はいろいろなことを思い付きます。えぇ。<BR>
			更に高速化されたアルゴリズムが完成してしまいました。<BR>
			理論的には、無改造のX68k(10MHz)でファミコンやゲームボーイまでを<BR>
			オリジナル以上のパフォーマンスで再現できます。これは速い！<BR>
			具体的には、<BR><BR>
			・静的多重コンパイル<BR>
			・動的再コンパイル<BR>
			・事前構造変換<BR><BR>
			という勝手に命名したものも含む（笑）３本柱でいきます。<BR>
			エミュレータの構造に詳しい人なら名前から何をするのかだいたい想像つくかな？<BR>
			「静的多重コンパイル」は盲点でした。思い付いた時、「やられたっ」って感じでした。<BR>
			なかなか美しい手法っすよ。はやくテスト終われ！<BR>

	</CENTER>

	<HR SIZE=3 WIDTH="80%">
	<A HREF="./x.html">Xのページに戻る</A><BR>
	<A HREF="./main.html">トップページに戻る</A>
	<HR SIZE=3 WIDTH="80%">

</BODY>

</HTML>